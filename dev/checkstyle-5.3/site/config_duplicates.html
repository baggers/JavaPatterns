<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">











<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>checkstyle - Duplicate code</title>
    <style type="text/css" media="all">
      @import url("./css/maven-base.css");
      @import url("./css/maven-theme.css");
      @import url("./css/site.css");
    </style>
    <link rel="stylesheet" href="./css/print.css" type="text/css" media="print" />
          <meta name="author" content="Checkstyle Development Team" />
        <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
      </head>
  <body class="composite">
    <div id="banner">
                    <span id="bannerLeft">
    
            Checkstyle 5.3
    
            </span>
                        <a href="" id="bannerRight">
    
                                            <img src="images/logo.png" alt="Checkstyle" />
    
            </a>
            <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
          
  

  
    
  
  
    
            <div class="xleft">
        Last Published: 2010-10-19
                      </div>
            <div class="xright">      
  

  
    
  
  
    
  </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
           
  

  
    
  
  
    
                   <h5>About</h5>
            <ul>
              
    <li class="none">
                    <a href="index.html">Checkstyle</a>
          </li>
              
    <li class="none">
                    <a href="releasenotes.html">Release Notes</a>
          </li>
          </ul>
              <h5>Documentation</h5>
            <ul>
              
          
              
      
              
        <li class="expanded">
                    <a href="config.html">Configuration</a>
                  <ul>
                  
    <li class="none">
                    <a href="property_types.html">Property Types</a>
          </li>
              </ul>
        </li>
              
          
              
      
            
      
              
        <li class="expanded">
                    <a href="running.html">Running</a>
                  <ul>
                  
    <li class="none">
                    <a href="anttask.html">Ant Task</a>
          </li>
                  
    <li class="none">
                    <a href="cmdline.html">Command Line</a>
          </li>
              </ul>
        </li>
              
    <li class="none">
                    <a href="availablechecks.html">Available Checks</a>
          </li>
              
          
              
      
            
      
            
      
            
      
            
            
            
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
              
            <li class="expanded">
                    <a href="checks.html">Standard Checks</a>
                  <ul>
                  
    <li class="none">
                    <a href="config_annotation.html">Annotations</a>
          </li>
                  
    <li class="none">
                    <a href="config_blocks.html">Block Checks</a>
          </li>
                  
    <li class="none">
                    <a href="config_design.html">Class Design</a>
          </li>
                  
    <li class="none">
                    <a href="config_coding.html">Coding</a>
          </li>
                  
    <li class="none">
              <strong>Duplicate Code</strong>
        </li>
                  
    <li class="none">
                    <a href="config_header.html">Headers</a>
          </li>
                  
    <li class="none">
                    <a href="config_imports.html">Imports</a>
          </li>
                  
    <li class="none">
                    <a href="config_javadoc.html">Javadoc Comments</a>
          </li>
                  
    <li class="none">
                    <a href="config_metrics.html">Metrics</a>
          </li>
                  
    <li class="none">
                    <a href="config_misc.html">Miscellaneous</a>
          </li>
                  
    <li class="none">
                    <a href="config_modifier.html">Modifiers</a>
          </li>
                  
    <li class="none">
                    <a href="config_naming.html">Naming Conventions</a>
          </li>
                  
    <li class="none">
                    <a href="config_regexp.html">Regexp</a>
          </li>
                  
    <li class="none">
                    <a href="config_sizes.html">Size Violations</a>
          </li>
                  
    <li class="none">
                    <a href="config_whitespace.html">Whitespace</a>
          </li>
              </ul>
        </li>
              
          
              
      
            
      
            
      
              
        <li class="expanded">
                    <a href="extending.html">Extending Checkstyle</a>
                  <ul>
                  
    <li class="none">
                    <a href="writingchecks.html">Writing checks</a>
          </li>
                  
    <li class="none">
                    <a href="writingfilters.html">Writing filters</a>
          </li>
                  
    <li class="none">
                    <a href="writinglisteners.html">Writing listeners</a>
          </li>
              </ul>
        </li>
          </ul>
              <h5>Developers</h5>
            <ul>
              
    <li class="none">
                    <a href="apidocs/index.html">Javadoc</a>
          </li>
              
    <li class="none">
                    <a href="http://sourceforge.net/projects/checkstyle" class="externalLink">Project Page</a>
          </li>
              
    <li class="none">
                    <a href="contributing.html">Contributing</a>
          </li>
          </ul>
              <h5>Project Documentation</h5>
            <ul>
              
                
              
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
              
        <li class="collapsed">
                    <a href="project-info.html">Project Information</a>
                </li>
              
                
              
      
              
        <li class="collapsed">
                    <a href="project-reports.html">Project Reports</a>
                </li>
          </ul>
                                                 
                        
                        
            <a href="http://sourceforge.net/projects/checkstyle" title="SourceForge" class="poweredBy">
                            <img alt="SourceForge" src="http://sflogo.sourceforge.net/sflogo.php?group_id=29721&type=11" />
            </a>
                               
  

  
    
  
  
    
        </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        <div class="section"><h2><a name="Duplicate_code"></a>Duplicate code</h2>
<p>
Duplicate code detection allows you to find
code that has been generated by Copy/Paste programming. Duplicate code typically
leads to higher maintainance cost because bugs will need to be fixed twice,
more code needs to be tested, etc.
</p>
<p>
There are many trade-offs when writing a duplicate code detection tool.
Some of the conflicting goals are:
</p>
<ul><li>Fast</li>
<li>Low memory usage</li>
<li>Avoid false alarms</li>
<li>Support multiple/arbitrary languages (Java, JSP, C++, ...)</li>
<li>Support Fuzzy matches (comments, whitespace, linebreaks, variable renaming, etc.)</li>
</ul>
<p>
The check provided here, StrictDuplicateCode, is fast enough to facilitate checking very large code
bases in acceptable time (minutes). It consumes very little memory, false
alarms are impossible. While it supports multiple
languages it does not support fuzzy matches (that's why it's called Strict).
</p>
<p>
Note that there are brilliant commercial implementations of duplicate code
detection tools. One that is particularly noteworthy is
<a href="http://www.redhillconsulting.com.au/products/simian/" class="externalLink">Simian</a>
from RedHill Consulting, Inc.
Simian has managed to find a very good balance of the above tradeoffs.
It is superior to the checks in this package in many repects.
Simian is reasonably priced (free for noncommercial projects)
and includes a Checkstyle plugin.
</p>
<p>
The following table summarizes the characteristics of the available
Checkstyle plugins for duplicate code detection:
</p>
<table class="bodyTable"><tr class="a"><th>Name</th>
<th>Speed</th>
<th>Memory Usage</th>
<th>False Alarms</th>
<th>Supported languages</th>
<th>Fuzzy matches</th>
</tr>
<tr class="b"><td>StrictDuplicateCode</td>
<td>High</td>
<td>Very Low</td>
<td>Impossible</td>
<td>any language</td>
<td>No</td>
</tr>
<tr class="a"><td>Simian</td>
<td>Very high</td>
<td>Low</td>
<td>Possible but very unlikely</td>
<td>many languages, including Java and C/C++/C#</td>
<td>Limited support</td>
</tr>
</table>
<p><strong>
We encourage all users of Checkstyle to evaluate Simian as an
alternative to the Checks we offer in our distribution.
</strong></p>
</div>
<div class="section"><h2><a name="StrictDuplicateCode"></a>StrictDuplicateCode</h2>
<p>
 Performs a line-by-line comparison of all code lines and reports
 duplicate code if a sequence of lines differs only in
 indentation.  All import statements in Java code are ignored, any
 other line - including javadoc, whitespace lines between methods,
 etc. - is considered (which is why the check is called
 <em>strict</em>).
 </p>
<div class="section"><h3><a name="Properties"></a>Properties</h3>
<table class="bodyTable"><tr class="b"><th>name</th>
<th>description</th>
<th>type</th>
<th>default value</th>
</tr>
<tr class="a"><td>min</td>
<td>how many lines must be equal to be considered a duplicate</td>
<td><a href="property_types.html#integer">int</a></td>
<td><code>12</code></td>
</tr>
<tr class="b"><td>fileExtensions</td>
<td>file type extension of files to process</td>
<td><a href="property_types.html#stringSet">String Set</a></td>
<td><code>{}</code></td>
</tr>
</table>
</div>
<div class="section"><h3><a name="Examples"></a>Examples</h3>
<p> To configure the check: </p>
<div class="source"><pre>
 &lt;module name=&quot;StrictDuplicateCode&quot;/&gt;
 </pre>
</div>
<p>
 To configure the check so that it allows larger equivalent blocks:
 </p>
<div class="source"><pre>
 &lt;module name=&quot;StrictDuplicateCode&quot;&gt;
   &lt;property name=&quot;min&quot; value=&quot;15&quot;/&gt;
 &lt;/module&gt;
 </pre>
</div>
</div>
<div class="section"><h3><a name="Package"></a>Package</h3>
<p>com.puppycrawl.tools.checkstyle.checks.duplicates</p>
</div>
<div class="section"><h3><a name="Parent_Module"></a>Parent Module</h3>
<p><a href="config.html#Checker">Checker</a></p>
</div>
</div>

      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">&#169;  
          2001-2010
    
          
  

  
    
  
  
    
  </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
