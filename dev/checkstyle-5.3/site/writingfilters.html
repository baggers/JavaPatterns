<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">











<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>checkstyle - Writing Filters</title>
    <style type="text/css" media="all">
      @import url("./css/maven-base.css");
      @import url("./css/maven-theme.css");
      @import url("./css/site.css");
    </style>
    <link rel="stylesheet" href="./css/print.css" type="text/css" media="print" />
          <meta name="author" content="Lars Kühne" />
        <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
      </head>
  <body class="composite">
    <div id="banner">
                    <span id="bannerLeft">
    
            Checkstyle 5.3
    
            </span>
                        <a href="" id="bannerRight">
    
                                            <img src="images/logo.png" alt="Checkstyle" />
    
            </a>
            <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
          
  

  
    
  
  
    
            <div class="xleft">
        Last Published: 2010-10-19
                      </div>
            <div class="xright">      
  

  
    
  
  
    
  </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
           
  

  
    
  
  
    
                   <h5>About</h5>
            <ul>
              
    <li class="none">
                    <a href="index.html">Checkstyle</a>
          </li>
              
    <li class="none">
                    <a href="releasenotes.html">Release Notes</a>
          </li>
          </ul>
              <h5>Documentation</h5>
            <ul>
              
          
              
      
              
        <li class="expanded">
                    <a href="config.html">Configuration</a>
                  <ul>
                  
    <li class="none">
                    <a href="property_types.html">Property Types</a>
          </li>
              </ul>
        </li>
              
          
              
      
            
      
              
        <li class="expanded">
                    <a href="running.html">Running</a>
                  <ul>
                  
    <li class="none">
                    <a href="anttask.html">Ant Task</a>
          </li>
                  
    <li class="none">
                    <a href="cmdline.html">Command Line</a>
          </li>
              </ul>
        </li>
              
    <li class="none">
                    <a href="availablechecks.html">Available Checks</a>
          </li>
              
          
              
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
              
        <li class="expanded">
                    <a href="checks.html">Standard Checks</a>
                  <ul>
                  
    <li class="none">
                    <a href="config_annotation.html">Annotations</a>
          </li>
                  
    <li class="none">
                    <a href="config_blocks.html">Block Checks</a>
          </li>
                  
    <li class="none">
                    <a href="config_design.html">Class Design</a>
          </li>
                  
    <li class="none">
                    <a href="config_coding.html">Coding</a>
          </li>
                  
    <li class="none">
                    <a href="config_duplicates.html">Duplicate Code</a>
          </li>
                  
    <li class="none">
                    <a href="config_header.html">Headers</a>
          </li>
                  
    <li class="none">
                    <a href="config_imports.html">Imports</a>
          </li>
                  
    <li class="none">
                    <a href="config_javadoc.html">Javadoc Comments</a>
          </li>
                  
    <li class="none">
                    <a href="config_metrics.html">Metrics</a>
          </li>
                  
    <li class="none">
                    <a href="config_misc.html">Miscellaneous</a>
          </li>
                  
    <li class="none">
                    <a href="config_modifier.html">Modifiers</a>
          </li>
                  
    <li class="none">
                    <a href="config_naming.html">Naming Conventions</a>
          </li>
                  
    <li class="none">
                    <a href="config_regexp.html">Regexp</a>
          </li>
                  
    <li class="none">
                    <a href="config_sizes.html">Size Violations</a>
          </li>
                  
    <li class="none">
                    <a href="config_whitespace.html">Whitespace</a>
          </li>
              </ul>
        </li>
              
          
              
      
            
            
            
      
              
            <li class="expanded">
                    <a href="extending.html">Extending Checkstyle</a>
                  <ul>
                  
    <li class="none">
                    <a href="writingchecks.html">Writing checks</a>
          </li>
                  
    <li class="none">
              <strong>Writing filters</strong>
        </li>
                  
    <li class="none">
                    <a href="writinglisteners.html">Writing listeners</a>
          </li>
              </ul>
        </li>
          </ul>
              <h5>Developers</h5>
            <ul>
              
    <li class="none">
                    <a href="apidocs/index.html">Javadoc</a>
          </li>
              
    <li class="none">
                    <a href="http://sourceforge.net/projects/checkstyle" class="externalLink">Project Page</a>
          </li>
              
    <li class="none">
                    <a href="contributing.html">Contributing</a>
          </li>
          </ul>
              <h5>Project Documentation</h5>
            <ul>
              
                
              
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
              
        <li class="collapsed">
                    <a href="project-info.html">Project Information</a>
                </li>
              
                
              
      
              
        <li class="collapsed">
                    <a href="project-reports.html">Project Reports</a>
                </li>
          </ul>
                                                 
                        
                        
            <a href="http://sourceforge.net/projects/checkstyle" title="SourceForge" class="poweredBy">
                            <img alt="SourceForge" src="http://sflogo.sourceforge.net/sflogo.php?group_id=29721&type=11" />
            </a>
                               
  

  
    
  
  
    
        </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        <div class="section"><h2><a name="Overview"></a>Overview</h2>
<p>
        A <code>Checker</code> has a set of <code>Filter</code>s that decide which audit events the <code>Checker</code> reports through its listeners.  Interface
        <code>Filter</code> and class <code>FilterSet</code> are intended to support general <code>AuditEvent</code> filtering using a set of <code>Filter</code>s.
      </p>
<p>
        A <code>Filter</code> has <code>boolean</code> method <code>accept(AuditEvent)</code> that returns <code>true</code> if the <code>Filter</code>
        accepts the <code>AuditEvent</code> parameter and returns
        <code>false</code> if the <code>Filter</code> rejects it.
      </p>
<p>
        A <code>FilterSet</code> is a particular <code>Filter</code> that contains a set of <code>Filter</code>s. A <code>FilterSet</code>
        accepts an <code>AuditEvent</code> if and only if all
        <code>Filter</code>s in the set accept the <code>AuditEvent</code>.
      </p>
<p>
        Here is a UML diagram for interface <code>Filter</code>
        and class <code>FilterSet</code>.
      </p>
<img src="images/Filter.gif" alt="Filter UML diagram" /></div>
<div class="section"><h2><a name="Writing_Filters"></a>Writing Filters</h2>
<p>
        The <code>Filter</code> that we demonstrate here rejects
        audit events for files whose name matches a <a href="property_types.html#regexp">regular expression</a>.  In order to
        enable the specification of the file name pattern as a property in a
        configuration file, the <code>Filter</code> is an <a href="apidocs/com/puppycrawl/tools/checkstyle/api/AutomaticBean.html">AutomaticBean</a>
        with mutator method <code>setFiles(String)</code> that
        receives the file name pattern.  An <code>AutomaticBean</code> uses JavaBean introspection to set
        JavaBean properties such as <code>files</code>.
      </p>
<div class="source"><pre>
package com.mycompany.filters;

import java.util.regex.Matcher;
import java.util.regex.Pattern;
import java.util.regex.PatternSyntaxException;

import com.puppycrawl.tools.checkstyle.api.AuditEvent;
import com.puppycrawl.tools.checkstyle.api.AutomaticBean;
import com.puppycrawl.tools.checkstyle.api.Filter;
import com.puppycrawl.tools.checkstyle.api.Utils;

public class FilesFilter
    extends AutomaticBean
    implements Filter
{
    private Pattern mFileRegexp;

    public FilesFilter()
        throws PatternSyntaxException
    {
        setFiles(&quot;^$&quot;);
    }

    public boolean accept(AuditEvent aEvent)
    {
        final String fileName = aEvent.getFileName();
        return ((fileName == null) || !mFileRegexp.matcher(fileName).find());
    }

    public void setFiles(String aFilesPattern)
        throws PatternSyntaxException
    {
        mFileRegexp = Utils.getPattern(aFilesPattern);
    }
}
      </pre>
</div>
</div>
<div class="section"><h2><a name="Using_Filters"></a>Using Filters</h2>
<p>
        To incorporate a <code>Filter</code> in the filter set
        for a <code>Checker</code>, include a module element for
        the <code>Filter</code> in the <a href="config.html#Filters">configuration file</a>. For example, to
        configure a <code>Checker</code> so that it uses custom
        filter <code>FilesFilter</code> to prevent reporting of
        audit events for files whose name contains &quot;Generated&quot;,
        include the following module in the configuration file:
      </p>
<div class="source"><pre>
&lt;module name=&quot;com.mycompany.filters.FilesFilter&quot;&gt;
    &lt;property name=&quot;files&quot; value=&quot;Generated&quot;/&gt;
&lt;/module&gt;
      </pre>
</div>
</div>
<div class="section"><h2><a name="Huh_I_cant_figure_it_out"></a>Huh? I can't figure it out!</h2>
<p>
        That's probably our fault, and it means that we have to provide
        better documentation. Please do not hesitate to ask questions on the
        user mailing list, this will help us to improve this document.  Please
        ask your questions as precisely as possible. We will not be able to
        answer questions like &quot;I want to write a filter but I don't
        know how, can you help me?&quot;. Tell us what you are trying to do
        (the purpose of the filter), what you have understood so far, and what
        exactly you are getting stuck on.
      </p>
</div>
<div class="section"><h2><a name="Contributing"></a>Contributing</h2>
<p>
        We need <em>your</em> help to keep improving Checkstyle. Whenever you
        write a filter that you think is generally useful, please consider <a href="contributing.html">contributing</a> it to the Checkstyle
        community and submit it for inclusion in the next release of
        Checkstyle.
      </p>
</div>

      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">&#169;  
          2001-2010
    
          
  

  
    
  
  
    
  </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
